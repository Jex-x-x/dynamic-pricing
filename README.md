# Dynamic Pricing for Marketplaces

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤ (Ozon, Wildberries).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ø—Ä–æ—Å–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤ (Ozon, Wildberries)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —É—á—ë—Ç–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (Bitrix, 1–°)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
- –î–µ—Ç–µ–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–≤—ã—Ö —Ü–µ–Ω –∏–∑ —É—á—ë—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
dynamic-pricing/
‚îú‚îÄ‚îÄ core/                    # –û–±—â–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ multiplier.js        # –†–∞—Å—á—ë—Ç –º–Ω–æ–∂–∏—Ç–µ–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ø—Ä–æ—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ base-price.js        # –î–µ—Ç–µ–∫—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö —Ü–µ–Ω
‚îÇ   ‚îî‚îÄ‚îÄ config.js            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ marketplaces/
‚îÇ   ‚îú‚îÄ‚îÄ ozon/                # Ozon API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ wildberries/         # Wildberries API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ workflows/
‚îÇ   ‚îú‚îÄ‚îÄ ozon/                # n8n workflows –¥–ª—è Ozon
‚îÇ   ‚îî‚îÄ‚îÄ wildberries/         # n8n workflows –¥–ª—è WB
‚îú‚îÄ‚îÄ storage/                 # PHP endpoints –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤
‚îú‚îÄ‚îÄ docs/                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ examples/                # –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Ozon

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| baseline_orders_day | 35 | –¶–µ–ª–µ–≤–æ–µ –∫–æ–ª-–≤–æ –∑–∞–∫–∞–∑–æ–≤ –≤ –¥–µ–Ω—å |
| min_multiplier | 0.85 | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å |
| max_multiplier | 1.70 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å |
| step | 0.05 | –®–∞–≥ –∏–∑–º–µ–Ω–µ–Ω–∏—è |
| threshold_low | 0.8 | –ü–æ—Ä–æ–≥ —Å–Ω–∏–∂–µ–Ω–∏—è |
| threshold_high | 1.2 | –ü–æ—Ä–æ–≥ –ø–æ–≤—ã—à–µ–Ω–∏—è |

**–ò—Å—Ç–æ—á–Ω–∏–∫ –±–∞–∑–æ–≤—ã—Ö —Ü–µ–Ω:** Bitrix catalog.price.list (type 2)
**–ú–∞–ø–ø–∏–Ω–≥:** Ozon `888XXXXX` ‚Üí Bitrix `XXXXX`
**–§–æ—Ä–º—É–ª–∞:** price = base √ó multiplier, min_price = base √ó 0.8, old_price = base √ó 1.6

### Wildberries

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| baseline_orders_day | 15 | –¶–µ–ª–µ–≤–æ–µ –∫–æ–ª-–≤–æ –∑–∞–∫–∞–∑–æ–≤ –≤ –¥–µ–Ω—å |
| min_multiplier | 0.80 | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å |
| max_multiplier | 1.70 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å |
| step | 0.05 | –®–∞–≥ –∏–∑–º–µ–Ω–µ–Ω–∏—è |
| threshold_low | 0.8 | –ü–æ—Ä–æ–≥ —Å–Ω–∏–∂–µ–Ω–∏—è |
| threshold_high | 1.2 | –ü–æ—Ä–æ–≥ –ø–æ–≤—ã—à–µ–Ω–∏—è |

**–ò—Å—Ç–æ—á–Ω–∏–∫ –±–∞–∑–æ–≤—ã—Ö —Ü–µ–Ω:** Bitrix catalog.price.list (type 6)
**–ú–∞–ø–ø–∏–Ω–≥:** WB `vendorCode` ‚Üí Bitrix `productId`
- `vendorCode` ‚Üí Bitrix `productId` (–ø—Ä—è–º–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ)
- `888vendorCode` ‚Üí Bitrix `productId` √ó **1.3** (–Ω–æ–≤—ã–π —Ç–∏—Ä–∞–∂, +30% –Ω–∞—Ü–µ–Ω–∫–∞)
**–§–æ—Ä–º—É–ª–∞:** discount% = (1 - base √ó multiplier / wbPrice) √ó 100
**Batch:** 1000 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ –∑–∞–ø—Ä–æ—Å (–ª–∏–º–∏—Ç WB API)

## –ê–ª–≥–æ—Ä–∏—Ç–º v2.4 (Two-Window + Smart LOWER)

### –†–∞—Å—á—ë—Ç –º–Ω–æ–∂–∏—Ç–µ–ª—è

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–¥–≤–∞ –æ–∫–Ω–∞** –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π:

| –û–∫–Ω–æ | –ü–µ—Ä–∏–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|--------|------------|
| `daily_ratio` | –° –ø–æ–ª—É–Ω–æ—á–∏ | –û–±—â–∏–π —Ç—Ä–µ–Ω–¥ –¥–Ω—è |
| `recent_ratio` | –ü–æ—Å–ª–µ–¥–Ω–∏–π 1 —á–∞—Å | –¢–µ–∫—É—â–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |

```
daily_expected = baseline √ó (—á–∞—Å–æ–≤_–ø—Ä–æ—à–ª–æ / 24)
daily_ratio = orders_today / daily_expected

recent_expected = baseline √ó (1 / 24)  # ~1.46 –¥–ª—è Ozon, ~0.63 –¥–ª—è WB
recent_ratio = orders_last_1h / recent_expected
```

### –õ–æ–≥–∏–∫–∞ —Ä–µ—à–µ–Ω–∏–π

```
–ü–û–í–´–°–ò–¢–¨ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç): daily > 1.2 AND recent >= 1.0
  ‚Üí –î–µ–Ω—å —Ö–æ—Ä–æ—à–∏–π –ò –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å –Ω–µ —Ö—É–∂–µ –Ω–æ—Ä–º—ã

–ü–û–í–´–°–ò–¢–¨ (strong recent): daily > 1.0 AND recent > 3.0
  ‚Üí –î–µ–Ω—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ò –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å –æ—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π

–ü–û–ù–ò–ó–ò–¢–¨ (dead hour): recent < 0.5
  ‚Üí –ü–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å —Å–æ–≤—Å–µ–º –º—ë—Ä—Ç–≤—ã–π

–ü–û–ù–ò–ó–ò–¢–¨ (bad day): daily < 0.8 AND recent <= 3.0
  ‚Üí –î–µ–Ω—å –ø–ª–æ—Ö–æ–π –ò —á–∞—Å –Ω–µ —Å–∏–ª—å–Ω—ã–π

–î–ï–†–ñ–ê–¢–¨: –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ
  ‚Üí –í —Ç.—á. –µ—Å–ª–∏ –¥–µ–Ω—å –ø–ª–æ—Ö–æ–π, –Ω–æ —á–∞—Å —Å–∏–ª—å–Ω—ã–π (—Å–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è)
```

### –ü—Ä–∏–º–µ—Ä—ã (Ozon, baseline=35)

| –°—Ü–µ–Ω–∞—Ä–∏–π | daily | recent | –†–µ—à–µ–Ω–∏–µ |
|----------|-------|--------|---------|
| –•–æ—Ä–æ—à–∏–π –¥–µ–Ω—å + –∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Å | 1.3 | 1.5 | **RAISE** |
| –ù–æ—Ä–º–∞–ª—å–Ω—ã–π –¥–µ–Ω—å + –æ—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π —á–∞—Å | 1.18 | 4.1 | **RAISE** ‚ö° |
| –•–æ—Ä–æ—à–∏–π –¥–µ–Ω—å + –º—ë—Ä—Ç–≤—ã–π —á–∞—Å | 1.3 | 0.0 | **LOWER** |
| –•–æ—Ä–æ—à–∏–π –¥–µ–Ω—å + —Å–ª–∞–±—ã–π —á–∞—Å | 1.3 | 0.7 | **HOLD** |
| –ü–ª–æ—Ö–æ–π –¥–µ–Ω—å + —Å–ª–∞–±—ã–π —á–∞—Å | 0.6 | 1.0 | **LOWER** |
| –ü–ª–æ—Ö–æ–π –¥–µ–Ω—å + —Å–∏–ª—å–Ω—ã–π —á–∞—Å | 0.7 | 4.0 | **HOLD** üîÑ |

### –î–µ—Ç–µ–∫—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö —Ü–µ–Ω (v2.0)

```
–ï—Å–ª–∏ currentPrice ‚âà savedBase √ó multiplier (¬±1%) ‚Üí —Ü–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
–ï—Å–ª–∏ currentPrice ‚â† —Ü–µ–ª–µ–≤–æ–π ‚Üí —É—á—ë—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–∏–ª–∞ –±–∞–∑—É
  ‚Üí –ø—Ä–∏–Ω—è—Ç—å –∫–∞–∫ –Ω–æ–≤—É—é –±–∞–∑—É
  ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å multiplier
  ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å
```

## –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã

| –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å | –°—Ç–∞—Ç—É—Å | –¢–æ–≤–∞—Ä–æ–≤ | API Prices | API Update |
|-------------|--------|---------|------------|------------|
| Ozon | ‚úÖ Production | ~3800 | v5/product/info/prices | v1/product/import/prices |
| Wildberries | ‚úÖ Production | ~5553 | /api/v2/list/goods/filter | /api/v2/upload/task |

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Wildberries

- **–ú–æ–¥–µ–ª—å —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:** base_price √ó (1 - discount%) = final_price
- **Rate limit:** 10 –∑–∞–ø—Ä–æ—Å–æ–≤ / 6 —Å–µ–∫—É–Ω–¥
- **Quarantine:** –ï—Å–ª–∏ –Ω–æ–≤–∞—è —Ü–µ–Ω–∞ < —Å—Ç–∞—Ä–æ–π/3, —Ç–æ–≤–∞—Ä —É—Ö–æ–¥–∏—Ç –≤ –∫–∞—Ä–∞–Ω—Ç–∏–Ω
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç task_id, —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
2. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å storage endpoints (PHP)
3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å workflow –≤ n8n
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å credentials

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
